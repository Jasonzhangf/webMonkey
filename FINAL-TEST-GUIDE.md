# Web Automation Orchestrator 插件测试指南（最终版）

## 安装插件

1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目中的 `plugin/dist` 目录

## 测试准备

1. 打开一个简单的网页，如 `basic-test.html`
2. 确保页面已完全加载

## 测试流程

### 1. 连接插件

1. 点击Chrome工具栏中的插件图标
2. 在弹出窗口中点击"连接编排器"按钮
3. 如果连接成功，状态会变为"已连接到编排器"

### 2. 捕获元素

1. 点击插件弹出窗口中的"捕获元素"按钮
   - 如果出现"无法进入捕获模式"错误，请刷新页面后重试
   - 如果出现"内容脚本已重新注入"提示，请再次点击"捕获元素"按钮
2. 弹出窗口会关闭，页面进入捕获模式
3. 将鼠标悬停在网页上的元素上（如按钮、输入框等）
   - 元素会被绿色高亮显示
   - 元素旁边会出现"选择此元素"按钮
4. 点击"选择此元素"按钮
5. 页面上会显示"元素已成功捕获"的提示
6. 再次点击插件图标，查看捕获结果

### 3. 测试选择器

1. 捕获元素后，点击插件弹出窗口中的"测试选择器"按钮
2. 如果选择器能够找到元素，该元素会被蓝色高亮显示
3. 弹出提示消息，显示测试结果

### 4. 记录选择器

1. 捕获元素后，点击插件弹出窗口中的"记录选择器"按钮
2. 选择器会被保存，并显示成功提示

## 故障排除

### 捕获元素失败

如果出现"捕获元素失败: Could not establish connection. Receiving end does not exist."错误：

1. 刷新当前页面
2. 重新点击"捕获元素"按钮
3. 如果仍然失败，尝试重新加载插件：
   - 在 `chrome://extensions/` 页面中点击插件的刷新图标
   - 然后重新打开页面并测试

### 内容脚本未加载

如果内容脚本未正确加载：

1. 在浏览器控制台中查看是否有错误信息
2. 尝试在页面上执行以下代码：
   ```javascript
   window.waoContentScriptInjected
   ```
3. 如果返回 `undefined`，说明内容脚本未加载，需要重新加载插件

### 选择器测试失败

如果选择器测试失败：

1. 检查页面是否发生了变化
2. 重新捕获元素
3. 确保选择器信息正确显示在插件弹出窗口中

## 注意事项

- 插件需要在HTTP或HTTPS页面上运行，不能在chrome://页面上使用
- 如果页面动态变化，可能需要重新捕获元素
- 插件使用CSS选择器和属性选择器，不使用XPath
- 如果遇到问题，请查看浏览器控制台的错误信息