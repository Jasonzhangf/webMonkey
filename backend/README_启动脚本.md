# 后端启动脚本使用说明

## 脚本说明

### 1. start_server.py (完整监控版本)
- **功能**: 持续监控端口占用，自动重启服务器
- **特点**: 
  - 智能进程管理
  - 自动重启机制
  - 详细日志输出
  - 优雅关闭处理

### 2. start.sh (Shell版本)
- **功能**: Shell脚本版本的监控启动
- **特点**:
  - 轻量级
  - 健康检查
  - 自动重启

### 3. quick_start.py (快速启动版本)
- **功能**: 简单清理端口并启动服务器
- **特点**:
  - 快速启动
  - 一次性执行
  - 适合开发调试

### 4. setup_and_start.py (完整设置版本) ⭐ 推荐
- **功能**: 自动创建虚拟环境、安装依赖、启动服务器
- **特点**:
  - 一键式完整设置
  - 自动虚拟环境管理
  - 自动依赖安装
  - 适合首次运行

## 使用方法

### 方法1: Python完整监控版本
```bash
cd backend
python3 start_server.py
```

### 方法2: Shell脚本版本
```bash
cd backend
./start.sh
```

### 方法3: 快速启动版本
```bash
cd backend
python3 quick_start.py
```

### 方法4: 完整设置版本 (推荐首次使用)
```bash
cd backend
python3 setup_and_start.py
```

## 配置说明

### 端口配置
默认端口: `18888` (避免与常用端口冲突)

如需修改端口，编辑对应脚本中的端口配置：
- `start_server.py`: 修改 `SERVER_PORT = 18888`
- `start.sh`: 修改 `PORT=18888`
- `quick_start.py`: 修改 `PORT = 18888`
- `setup_and_start.py`: 修改 `PORT = 18888`

### 服务器脚本
默认服务器脚本: `src/main.py`

## 功能特性

### 自动端口清理
- 检测端口占用情况
- 自动终止占用进程
- 支持优雅关闭和强制终止

### 进程监控
- 监控服务器进程状态
- 自动重启崩溃的服务器
- 健康检查机制

### 日志输出
- 详细的状态信息
- 进程管理日志
- 错误信息提示

## 推荐使用

### 开发环境
推荐使用 `quick_start.py` 进行快速启动和调试

### 生产环境
推荐使用 `start_server.py` 进行持续监控和自动重启

### 轻量级需求
推荐使用 `start.sh` Shell脚本版本

## 注意事项

1. 确保Python3已安装
2. 确保有足够权限杀掉进程
3. 服务器脚本 `main.py` 必须存在
4. 脚本会自动切换到backend目录执行

## 停止服务

使用 `Ctrl+C` 停止监控脚本，脚本会自动清理并关闭服务器进程。