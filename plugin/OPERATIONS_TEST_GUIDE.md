# 🎮 元素操作功能测试指南

## 新增功能概览

### 🎯 核心功能
1. **多元素选择** - 支持选择多个元素，每个元素独立管理
2. **操作选择** - 每个捕获的元素都可以执行7种不同操作
3. **操作记录** - 记录和显示每个元素的操作历史
4. **实时反馈** - 操作执行时提供视觉反馈和结果显示

### 🛠️ 支持的操作类型

| 操作 | 图标 | 功能描述 | 适用元素 |
|------|------|----------|----------|
| 悬停 | 🖱️ | 模拟鼠标悬停 | 所有可交互元素 |
| 点击 | 👆 | 模拟鼠标左键点击 | 按钮、链接、表单元素 |
| 右键 | 🖱️ | 模拟鼠标右键点击 | 所有元素 |
| 输入 | ⌨️ | 模拟键盘输入文字 | 输入框、文本区域 |
| 上滚 | ⬆️ | 向上滚动 | 可滚动元素或页面 |
| 下滚 | ⬇️ | 向下滚动 | 可滚动元素或页面 |
| 提取 | 📝 | 提取元素文字内容 | 所有包含文字的元素 |

## 测试步骤

### 1. 基础设置
1. 构建并加载插件到Chrome
2. 打开测试页面：`operations-test.html`
3. 点击插件图标 → "开始选择元素"

### 2. 元素选择测试
1. **多元素选择**
   - 点击页面上的不同元素
   - 验证每个元素都被绿色边框标记
   - 检查菜单中显示的元素列表

2. **元素信息显示**
   - 验证每个元素显示正确的编号
   - 检查元素描述是否准确
   - 确认选择器生成正确

### 3. 操作功能测试

#### 🖱️ 悬停操作测试
- **测试元素**: 悬停测试区域
- **预期效果**: 
  - 元素出现紫色高亮边框
  - 2秒后自动消失
  - 操作记录中显示"悬停操作已执行"

#### 👆 点击操作测试
- **测试元素**: 各种按钮和链接
- **预期效果**:
  - 元素出现橙色闪烁效果
  - 触发实际的点击事件
  - 页面日志记录点击操作

#### 🖱️ 右键操作测试
- **测试元素**: 右键测试区域
- **预期效果**:
  - 元素出现棕色高亮边框
  - 触发上下文菜单事件
  - 1秒后高亮消失

#### ⌨️ 输入操作测试
- **测试元素**: 各种输入框和文本区域
- **操作步骤**:
  1. 点击"⌨️ 输入"按钮
  2. 在弹出的输入框中输入测试文字
  3. 使用快捷字符按钮插入特殊字符：
     - **↵** - 插入换行符 (\n)
     - **Tab** - 插入制表符 (\t)  
     - **Space** - 插入空格
     - **Enter** - 插入回车换行 (\r\n)
  4. 点击"确认输入"
- **预期效果**:
  - 目标元素获得焦点
  - 文字和特殊字符被正确输入
  - 特殊字符在不同元素中正确显示：
    - 单行输入框：换行符可能被忽略或转为空格
    - 多行文本区域：换行符创建新行，制表符创建缩进
    - 可编辑元素：换行符转为`<br>`，制表符转为空格
  - 触发相应的键盘和输入事件

#### ⬆️⬇️ 滚动操作测试
- **测试元素**: 可滚动区域
- **预期效果**:
  - 页面或元素发生滚动
  - 滚动距离约200像素
  - 如果元素不可滚动，则滚动整个页面

#### 📝 文字提取测试
- **测试元素**: 包含文字的各种元素
- **预期效果**:
  - 成功提取元素的文字内容
  - 对于输入框，提取value或placeholder
  - 对于其他元素，提取textContent
  - 长文本会被截断并添加"..."

### 4. 操作记录测试
1. **记录显示**
   - 每次操作后检查操作记录区域
   - 验证操作类型、时间、结果正确显示

2. **结果查看**
   - 输入操作显示输入的文字
   - 提取操作显示提取的内容
   - 其他操作显示"执行成功"

### 5. 特殊字符输入测试
1. **快捷字符按钮**
   - 点击"⌨️ 输入"后显示增强输入界面
   - 输入框下方显示特殊字符快捷按钮
   - 点击快捷按钮在光标位置插入对应字符

2. **特殊字符处理**
   - **换行符测试**: 在多行文本区域中创建新行
   - **制表符测试**: 创建缩进效果
   - **空格测试**: 插入标准空格字符
   - **组合测试**: 多种特殊字符的组合使用

3. **不同元素类型测试**
   - **单行输入框**: 特殊字符的兼容性处理
   - **多行文本区域**: 完整的特殊字符支持
   - **可编辑元素**: HTML格式转换

### 6. 界面交互测试
1. **增强输入界面**
   - 点击"⌨️ 输入"后显示两行界面
   - 第一行：文本输入框 + 确认按钮
   - 第二行：特殊字符快捷按钮
   - 输入完成后界面自动隐藏

2. **操作按钮**
   - 所有操作按钮都可正常点击
   - 悬停时有视觉反馈
   - 按钮布局整齐

## 预期效果验证

### ✅ 正常情况
- 菜单显示所有捕获的元素
- 每个元素都有完整的操作选项
- 操作执行时有视觉反馈
- 操作结果正确记录和显示
- 页面元素响应模拟操作

### 🎨 视觉反馈
- **悬停操作**: 紫色边框 + 2秒持续
- **点击操作**: 橙色闪烁 + 缩放动画
- **右键操作**: 棕色边框 + 1秒持续
- **输入操作**: 元素获得焦点
- **滚动操作**: 页面/元素滚动
- **提取操作**: 显示提取的文字

### 📊 操作记录
- 操作类型正确显示
- 输入内容完整记录
- 提取文字准确显示
- 时间戳和元素信息清晰

## 测试文件

- `operations-test.html` - 基础操作功能测试页面
- `special-chars-test.html` - 特殊字符输入专项测试页面

## 测试用例

### 综合测试流程
1. 选择一个输入框元素
2. 执行"输入"操作，输入"Hello World"
3. 使用特殊字符按钮添加换行符和制表符
4. 执行"提取"操作，验证提取的文字
5. 选择一个按钮元素
6. 执行"悬停"操作，观察视觉效果
7. 执行"点击"操作，检查页面响应
8. 选择一个可滚动区域
9. 执行"下滚"和"上滚"操作

### 特殊字符专项测试流程
1. 打开 `special-chars-test.html` 测试页面
2. 选择多行文本区域元素
3. 执行输入操作，测试以下组合：
   - "第一行" + 换行符 + "第二行"
   - "姓名" + 制表符 + "年龄" + 制表符 + "城市"
   - 多个连续的特殊字符组合
4. 选择单行输入框，测试特殊字符的处理
5. 选择可编辑元素，验证HTML格式转换

### 边界情况测试
- 对不支持输入的元素执行输入操作
- 对不可滚动的元素执行滚动操作
- 提取空文本元素的内容
- 快速连续执行多个操作

## 故障排除

### 常见问题
1. **操作无效果** - 检查元素是否仍在页面中
2. **输入失败** - 确认元素支持文字输入
3. **滚动无效** - 检查元素或页面是否可滚动
4. **提取为空** - 验证元素是否包含文字内容

### 调试方法
- 查看浏览器控制台日志
- 检查操作记录区域的反馈
- 观察页面元素的视觉变化
- 验证页面日志记录

## 性能考虑
- 操作记录会累积，建议定期清空选择
- 大量元素选择可能影响页面性能
- 复杂页面的滚动操作可能需要时间

## 下一步改进
- [ ] 添加操作序列录制功能
- [ ] 支持操作的撤销和重做
- [ ] 添加操作延迟设置
- [ ] 支持批量操作执行