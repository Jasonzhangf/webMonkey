<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>特殊字符输入测试页面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 8px;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .input-item {
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 6px;
            background: white;
        }
        
        .input-item h4 {
            margin-top: 0;
            color: #555;
            font-size: 14px;
        }
        
        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
            font-family: monospace;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #007cba;
            box-shadow: 0 0 0 3px rgba(0, 123, 186, 0.1);
        }
        
        textarea.form-control {
            resize: vertical;
            min-height: 80px;
        }
        
        .expected-result {
            margin-top: 10px;
            padding: 8px;
            background: #f1f3f4;
            border-radius: 4px;
            font-size: 12px;
            color: #666;
        }
        
        .expected-result strong {
            color: #333;
        }
        
        .instructions {
            background: #e8f5e9;
            border: 1px solid #c8e6c9;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .instructions h4 {
            margin-top: 0;
            color: #2e7d32;
        }
        
        .char-examples {
            background: #fff3e0;
            border: 1px solid #ffcc02;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .char-examples h4 {
            margin-top: 0;
            color: #f57c00;
        }
        
        .char-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .char-item {
            background: white;
            padding: 8px;
            border-radius: 4px;
            text-align: center;
            font-family: monospace;
            font-size: 12px;
        }
        
        .char-symbol {
            font-weight: bold;
            color: #d32f2f;
        }
        
        .char-name {
            color: #666;
            margin-top: 4px;
        }
        
        .test-results {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .test-results h4 {
            margin-top: 0;
            color: #495057;
        }
        
        .result-item {
            padding: 8px;
            margin: 5px 0;
            background: white;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            border-left: 4px solid #007cba;
        }
    </style>
</head>
<body>
    <h1>🔤 特殊字符输入功能测试</h1>
    
    <div class="instructions">
        <h4>📋 测试说明</h4>
        <ol>
            <li>点击插件图标 → "开始选择元素"</li>
            <li>点击下面的输入框进行捕获</li>
            <li>在插件菜单中点击"⌨️ 输入"按钮</li>
            <li>使用快捷字符按钮插入特殊字符</li>
            <li>观察输入结果是否正确</li>
        </ol>
    </div>
    
    <div class="char-examples">
        <h4>🎯 支持的特殊字符</h4>
        <div class="char-list">
            <div class="char-item">
                <div class="char-symbol">↵</div>
                <div class="char-name">换行符 (\n)</div>
            </div>
            <div class="char-item">
                <div class="char-symbol">Tab</div>
                <div class="char-name">制表符 (\t)</div>
            </div>
            <div class="char-item">
                <div class="char-symbol">Space</div>
                <div class="char-name">空格</div>
            </div>
            <div class="char-item">
                <div class="char-symbol">Enter</div>
                <div class="char-name">回车换行 (\r\n)</div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h3>1. 单行输入框测试</h3>
        <p>测试在单行输入框中插入特殊字符</p>
        <div class="input-grid">
            <div class="input-item">
                <h4>普通文本输入框</h4>
                <input type="text" id="text-input-1" class="form-control" placeholder="测试特殊字符输入">
                <div class="expected-result">
                    <strong>预期:</strong> 特殊字符会被插入到光标位置，换行符在单行输入框中可能显示为空格或被忽略
                </div>
            </div>
            
            <div class="input-item">
                <h4>密码输入框</h4>
                <input type="password" id="password-input-1" class="form-control" placeholder="密码输入测试">
                <div class="expected-result">
                    <strong>预期:</strong> 特殊字符正常插入，但显示为密码字符
                </div>
            </div>
            
            <div class="input-item">
                <h4>邮箱输入框</h4>
                <input type="email" id="email-input-1" class="form-control" placeholder="email@example.com">
                <div class="expected-result">
                    <strong>预期:</strong> 特殊字符插入，但可能影响邮箱格式验证
                </div>
            </div>
            
            <div class="input-item">
                <h4>搜索输入框</h4>
                <input type="search" id="search-input-1" class="form-control" placeholder="搜索内容">
                <div class="expected-result">
                    <strong>预期:</strong> 特殊字符正常插入到搜索框中
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h3>2. 多行文本区域测试</h3>
        <p>测试在多行文本区域中插入特殊字符（最佳测试场景）</p>
        <div class="input-grid">
            <div class="input-item">
                <h4>标准文本区域</h4>
                <textarea id="textarea-1" class="form-control" rows="4" placeholder="在这里测试多行文本和特殊字符"></textarea>
                <div class="expected-result">
                    <strong>预期:</strong> 所有特殊字符都应该正确显示，换行符创建新行，制表符创建缩进
                </div>
            </div>
            
            <div class="input-item">
                <h4>大文本区域</h4>
                <textarea id="textarea-2" class="form-control" rows="6" placeholder="大型文本区域，适合测试复杂文本格式"></textarea>
                <div class="expected-result">
                    <strong>预期:</strong> 支持复杂的文本格式，包括多个换行符和制表符的组合
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h3>3. 可编辑元素测试</h3>
        <p>测试在可编辑元素中插入特殊字符</p>
        <div class="input-grid">
            <div class="input-item">
                <h4>可编辑DIV</h4>
                <div id="editable-div-1" class="form-control" contenteditable="true" style="min-height: 60px;">
                    点击这里开始编辑...
                </div>
                <div class="expected-result">
                    <strong>预期:</strong> 换行符转换为&lt;br&gt;标签，制表符转换为空格
                </div>
            </div>
            
            <div class="input-item">
                <h4>可编辑段落</h4>
                <p id="editable-p-1" class="form-control" contenteditable="true" style="min-height: 60px;">
                    这是一个可编辑的段落元素
                </p>
                <div class="expected-result">
                    <strong>预期:</strong> 特殊字符转换为HTML格式显示
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h3>4. 组合测试场景</h3>
        <p>测试复杂的特殊字符组合</p>
        <div class="input-grid">
            <div class="input-item">
                <h4>代码输入区域</h4>
                <textarea id="code-textarea" class="form-control" rows="8" placeholder="// 在这里测试代码格式
function example() {
    // 使用Tab和换行符
    return 'Hello World';
}"></textarea>
                <div class="expected-result">
                    <strong>测试建议:</strong> 
                    <br>1. 输入 "Hello" + Tab + "World" + 换行 + "Next Line"
                    <br>2. 测试多个连续的制表符和换行符
                    <br>3. 测试空格和其他字符的组合
                </div>
            </div>
            
            <div class="input-item">
                <h4>表格数据输入</h4>
                <textarea id="table-textarea" class="form-control" rows="6" placeholder="姓名	年龄	城市
张三	25	北京
李四	30	上海"></textarea>
                <div class="expected-result">
                    <strong>测试建议:</strong> 使用制表符分隔数据列，换行符分隔数据行
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-results" id="test-results">
        <h4>📊 测试结果记录</h4>
        <div id="results-content">
            <div class="result-item">等待测试操作...</div>
        </div>
    </div>
    
    <script>
        // 记录输入事件
        function logInput(element, value) {
            const resultsContent = document.getElementById('results-content');
            const timestamp = new Date().toLocaleTimeString();
            const elementDesc = element.id || element.tagName.toLowerCase();
            
            const resultItem = document.createElement('div');
            resultItem.className = 'result-item';
            
            // 显示特殊字符
            const displayValue = value
                .replace(/\n/g, '\\n')
                .replace(/\t/g, '\\t')
                .replace(/\r/g, '\\r')
                .replace(/ /g, '·'); // 用中点显示空格
            
            resultItem.innerHTML = `[${timestamp}] ${elementDesc}: "${displayValue}"`;
            
            resultsContent.appendChild(resultItem);
            resultsContent.scrollTop = resultsContent.scrollHeight;
        }
        
        // 监听所有输入元素
        document.addEventListener('DOMContentLoaded', function() {
            const inputElements = document.querySelectorAll('input, textarea, [contenteditable="true"]');
            
            inputElements.forEach(element => {
                element.addEventListener('input', function() {
                    const value = this.value || this.textContent || this.innerHTML;
                    logInput(this, value);
                });
                
                // 监听键盘事件
                element.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === 'Tab') {
                        setTimeout(() => {
                            const value = this.value || this.textContent || this.innerHTML;
                            logInput(this, `[${e.key}键] ${value}`);
                        }, 10);
                    }
                });
            });
            
            console.log('特殊字符测试页面已加载');
            console.log('请使用插件测试特殊字符输入功能');
        });
    </script>
</body>
</html>