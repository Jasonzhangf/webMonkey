# Web Automation Orchestrator 插件测试指南

## 安装插件

1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目中的 `plugin/dist` 目录

## 安装并运行测试服务器

1. 确保已安装Node.js
2. 安装依赖：
   ```bash
   npm install
   ```
3. 启动测试服务器：
   ```bash
   npm start
   ```
4. 在浏览器中访问测试控制台：`http://localhost:8765`

## 测试步骤

### 1. 基本连接测试

1. 打开Chrome浏览器，确保插件已安装
2. 点击浏览器工具栏中的插件图标
3. 在弹出窗口中点击"连接编排器"
4. 检查测试控制台中的消息日志，确认收到连接请求
5. 验证插件状态显示为"已连接"

### 2. 元素选择测试

1. 在测试控制台中选择"节点连接请求"模板
2. 修改`tab_id`为当前标签页ID（可以通过Chrome DevTools查看）
3. 点击"发送消息"
4. 在任意网页上按住Ctrl键并点击元素
5. 检查测试控制台中的消息日志，确认收到元素选择消息

### 3. 操作定义测试

1. 在测试控制台中选择"节点连接请求"模板
2. 修改`connection_mode`为"operation_definition"
3. 点击"发送消息"
4. 在网页上选择元素并定义操作
5. 检查测试控制台中的消息日志，确认收到操作定义消息

### 4. 断线重连测试

1. 关闭测试服务器（按Ctrl+C）
2. 观察插件状态变为"未连接"
3. 重新启动测试服务器
4. 验证插件能够自动重新连接

## 测试注意事项

- 确保测试服务器和插件配置使用相同的WebSocket端口（默认8765）
- 测试不同类型的网页元素（按钮、输入框、链接等）
- 测试不同的操作类型（点击、输入、提取等）
- 测试跨页面导航场景
- 测试多标签页场景

## 常见问题排查

1. **插件无法连接到测试服务器**
   - 确认测试服务器正在运行
   - 检查端口是否被其他应用占用
   - 检查浏览器控制台是否有错误信息

2. **元素选择不工作**
   - 确认已发送节点连接请求
   - 确认正确按住Ctrl键
   - 检查浏览器控制台是否有错误信息

3. **操作菜单不显示**
   - 确认connection_mode设置为"operation_definition"
   - 检查浏览器控制台是否有错误信息